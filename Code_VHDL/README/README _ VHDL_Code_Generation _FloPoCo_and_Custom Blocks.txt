OBJECTIVE:

This script automates the generation of synthesizable VHDL files for both:

    Custom-designed blocks (my own implementation)

    Blocks generated by FloPoCo

DIRECTORY STRUCTURE:

project/
├── generate_vhdl.py ← Python script to launch generation
├── template/ ← Contains VHDL template files
│ ├── top_add_template.vhd
│ ├── top_mult_template.vhd
│ ├── top_mac_template.vhd
│ ├── top_flopoco_fpadd_template.vhd
│ ├── top_flopoco_fpmult_template.vhd
│ └── top_flopoco_fpmac_template.vhd
└── vhdl_files/
├── my_code/ ← My custom VHDL top-level designs
│ ├── top_Add_Test.vhd
│ ├── top_Mult_Test.vhd
│ └── top_MAC_Test.vhd
└── flopoco/ ← FloPoCo VHDL + integrated top-levels
├── top_FPAdd_Test.vhd
├── top_FPMult_Test.vhd
└── top_FPMAC_Test.vhd

⚠️⚠️ HOW TO GENERATE FILES:
----------------------------------
From the project/ directory, run:
If you want to generate my personal code :
python3 generate_vhdl.py MYCODE

If you want to generate Flopoco code : 
python3 generate_vhdl.py FLOPOCO <frequence value>

For example : 
python3 generate_vhdl.py MYCODE       # For my code
python3 generate_vhdl.py FLOPOCO 300  # For Flopoco

----------------------------------

⚠️ The script will perform two main tasks:

(1) FLOPOCO BLOCKS:

    Calls FloPoCo using command line (e.g. flopoco IEEEFPAdd ...)

    Moves the generated flopoco.vhdl into a build directory

    Merges the generated code with a VHDL top-level template

    Saves the full file into: vhdl_files/flopoco/top_<Component>_Test.vhd

(2) CUSTOM BLOCKS:

    Loads your custom top-level template

    Replaces placeholders (e.g. {{ENTITY_NAME}}, {{EXP_WIDTH}}, etc.)

    Saves the result into: vhdl_files/my_code/top_<Block>_Test.vhd

⚙️ PARAMETERS:

Inside generate_vhdl.py, you can customize each block like this:

Example for custom blocks:
{
"name": "Add",
"template": "top_add_template.vhd",
"exp_width": 5,
"mant_width": 10,
"DECAL": 29
}

Example for FloPoCo blocks:
{
"component": "FPMAC",
"template": "top_flopoco_fpmac_template.vhd",
"flopoco_cmd": "IEEEFPFMA",
"exp_width": 5,
"mant_width": 10,
"name": "FPMAC16"
}


⚠️⚠️ NB : Change only the exp_width and mant_width parameters !!

For the parameter DECAL, if you are testing float 16 keep it at 29. For the other types of float, follow this instruction : 

Float 32  →  DECAL = 253

Bfloat        →  DECAL = 253

Double    →  DECAL = 2045

